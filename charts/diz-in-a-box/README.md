# diz-in-a-box

DIZ in a box.

![Type: application](https://img.shields.io/badge/Type-application-informational?style=flat-square)

## Installing the Chart

To install the chart with the release name `my-diz`:

```console
helm install my-diz oci://ghcr.io/bzkf/diz-in-a-box/charts/diz-in-a-box
```

## Requirements

Kubernetes: `>= 1.21.0`

| Repository                                             | Name                | Version |
| ------------------------------------------------------ | ------------------- | ------- |
| https://akhq.io/                                       | akhq                | 0.3.1   |
| https://hapifhir.github.io/hapi-fhir-jpaserver-starter | hapi-fhir-jpaserver | 0.11.1  |
| https://miracum.github.io/charts                       | fhir-gateway        | 6.0.3   |
| https://miracum.github.io/charts                       | stream-processors   | 1.1.10  |

## Values

| Key                                                                                          | Type   | Default                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | Description                                                                                                                                                   |
| -------------------------------------------------------------------------------------------- | ------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| akhq.configuration.akhq.connections.bzkf-dizbox-cluster.properties."bootstrap.servers"       | string | `"bzkf-dizbox-cluster-kafka-bootstrap:9093"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | the Kafka bootstrap server. Needs to be changed if the chart release name is changed from the default `bzkf-dizbox`                                           |
| akhq.configuration.akhq.connections.bzkf-dizbox-cluster.properties."security.protocol"       | string | `"SSL"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                                                                                                                               |
| akhq.configuration.akhq.connections.bzkf-dizbox-cluster.properties."ssl.keystore.location"   | string | `"/opt/kafka-certs/user.p12"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |                                                                                                                                                               |
| akhq.configuration.akhq.connections.bzkf-dizbox-cluster.properties."ssl.keystore.password"   | string | `"${SSL_KEY_STORE_PASSWORD}"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |                                                                                                                                                               |
| akhq.configuration.akhq.connections.bzkf-dizbox-cluster.properties."ssl.truststore.location" | string | `"/opt/kafka-certs/ca.p12"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |                                                                                                                                                               |
| akhq.configuration.akhq.connections.bzkf-dizbox-cluster.properties."ssl.truststore.password" | string | `"${SSL_TRUST_STORE_PASSWORD}"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |                                                                                                                                                               |
| akhq.enabled                                                                                 | bool   | `true`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | whether the included [Kafka UI AKHQ](https://akhq.io/) should be installed                                                                                    |
| fhir-gateway.enabled                                                                         | bool   | `true`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |                                                                                                                                                               |
| fhir-gateway.extraEnv[0].name                                                                | string | `"SERVICES_KAFKA_GENERATE_OUTPUT_TOPIC_MATCH_EXPRESSION"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |                                                                                                                                                               |
| fhir-gateway.extraEnv[0].value                                                               | string | `"fhir\\\\."`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |                                                                                                                                                               |
| fhir-gateway.extraEnv[1].name                                                                | string | `"SERVICES_KAFKA_GENERATE_OUTPUT_TOPIC_REPLACE_WITH"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |                                                                                                                                                               |
| fhir-gateway.extraEnv[1].value                                                               | string | `"fhir.pseudonymized."`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                                                                                                                               |
| fhir-gateway.fhir-pseudonymizer.anonymizationConfig                                          | string | `"fhirVersion: R4\nfhirPathRules:\n  - path: nodesByType('HumanName')\n    method: redact\n  - path: nodesByType('Identifier').where(type.coding.system='http://terminology.hl7.org/CodeSystem/v2-0203' and type.coding.code='VN').value\n    method: pseudonymize\n    domain: visit-identifiers\n  - path: nodesByType('Identifier').where(type.coding.system='http://terminology.hl7.org/CodeSystem/v2-0203' and type.coding.code='MR').value\n    method: pseudonymize\n    domain: patient-identifiers\nparameters:\n  dateShiftKey: \"\"\n  dateShiftScope: resource\n  cryptoHashKey: \"secret\"\n  encryptKey: \"\"\n  enablePartialAgesForRedact: true\n  enablePartialDatesForRedact: true\n  enablePartialZipCodesForRedact: true\n  restrictedZipCodeTabulationAreas: []\n"` |                                                                                                                                                               |
| fhir-gateway.fhir-pseudonymizer.pseudonymizationService                                      | string | `"Vfps"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |                                                                                                                                                               |
| fhir-gateway.fhir-pseudonymizer.vfps.appsettings                                             | string | `"{\n  \"Init\": {\n    \"v1\": {\n      \"Namespaces\": [\n        {\n          \"Name\": \"patient-identifiers\",\n          \"Description\": \"Pseudonyms for patient identifiers\",\n          \"PseudonymGenerationMethod\": \"SecureRandomBase64UrlEncoded\",\n          \"PseudonymLength\": 32,\n          \"PseudonymPrefix\": \"pid-\"\n        },\n        {\n          \"Name\": \"visit-identifiers\",\n          \"Description\": \"Pseudonyms for visit/encounter identifiers\",\n          \"PseudonymGenerationMethod\": \"SecureRandomBase64UrlEncoded\",\n          \"PseudonymLength\": 32,\n          \"PseudonymPrefix\": \"vid-\"\n        }\n      ]\n    }\n  }\n}\n"`                                                                                          |                                                                                                                                                               |
| fhir-gateway.fhir-pseudonymizer.vfps.enabled                                                 | bool   | `true`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |                                                                                                                                                               |
| fhir-gateway.fhir-pseudonymizer.vfps.postgresql.auth.postgresPassword                        | string | `"vfps-postgres"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |                                                                                                                                                               |
| fhir-gateway.kafka.enabled                                                                   | bool   | `true`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |                                                                                                                                                               |
| fhir-gateway.kafka.inputTopics[0]                                                            | string | `"fhir.onkoadt.MedicationStatement"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |                                                                                                                                                               |
| fhir-gateway.kafka.inputTopics[1]                                                            | string | `"fhir.onkoadt.Condition"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                                                               |
| fhir-gateway.kafka.inputTopics[2]                                                            | string | `"fhir.onkoadt.Observation"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |                                                                                                                                                               |
| fhir-gateway.kafka.inputTopics[3]                                                            | string | `"fhir.onkoadt.Procedure"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |                                                                                                                                                               |
| fhir-gateway.kafka.outputTopic                                                               | string | `"fhir.post-gateway"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |                                                                                                                                                               |
| fhir-gateway.kafka.securityProtocol                                                          | string | `"SSL"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                                                                                                                               |
| fhir-gateway.kafka.strimziClusterName                                                        | string | `"bzkf-dizbox-cluster"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                                                                                                                               |
| fhir-gateway.loincConverter.enabled                                                          | bool   | `false`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                                                                                                                               |
| fhir-gateway.postgresql.enabled                                                              | bool   | `false`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                                                                                                                               |
| fhir-gateway.sinks.postgres.enabled                                                          | bool   | `false`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |                                                                                                                                                               |
| hapi-fhir-jpaserver.enabled                                                                  | bool   | `true`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | whether the included [HAPI FHIR JPA Server](https://github.com/hapifhir/hapi-fhir-jpaserver-starter) should be installed                                      |
| hapi-fhir-jpaserver.postgresql.auth.postgresPassword                                         | string | `"fhir"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | the postgres database root (`postgres`) user. this should be changed for improved security.                                                                   |
| hapi-fhir-jpaserver.postgresql.nameOverride                                                  | string | `"hapi-fhir-postgres"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |                                                                                                                                                               |
| hapi-fhir-jpaserver.postgresql.primary.persistence.size                                      | string | `"32Gi"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | size for the HAPI FHIR server's PostgreSQL database                                                                                                           |
| stream-processors.enabled                                                                    | bool   | `true`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | whether the included [stream processors](https://github.com/miracum/charts/tree/master/charts/stream-processors) chart should be installed                    |
| stream-processors.strimziClusterName                                                         | string | `"bzkf-dizbox-cluster"`                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | name of the Kafka cluster deployed by the Strimzi Operator. This should be the same as the name in the [Kafka custom resource](../../k8s/kafka-cluster.yaml). |

---

Autogenerated from chart metadata using [helm-docs v1.11.0](https://github.com/norwoodj/helm-docs/releases/v1.11.0)
